!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):(t=t||self).VueChronos=e(t.vue)}(this,(function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;const e="object"==typeof process&&"object"==typeof process.env&&"production"!==process.env.NODE_ENV,o=(t,e)=>{console.error("[VueRouteProps warn]: ",t,e)},r=t=>({}.toString.call(t)),u=(t,e)=>t.hasOwnProperty(e),n=[null,Boolean,String,Number,Array,Object];function i(){}function s(){return!0}function c(t,n={}){return{beforeCreate(){if(void 0!==this.$options.routeProps){e&&(function({context:t}){void 0===t.$router&&o("Missing vue-router",t)}({context:this}),function({routeProps:t,context:e}){let o=!0;if("[object Object]"===r(t))for(const u in t)"[object Object]"===r(t[u])&&(o=o&&p({routeProps:t,prop:u,context:e})&&a({routeProps:t,prop:u,context:e}))}({routeProps:this.$options.routeProps,context:this})),this._routeProps={normalized:l({routeProps:this.$options.routeProps}),computed:{}};for(const e in this._routeProps.normalized)this._routeProps.computed[e]=void 0,t.util.defineReactive(this._routeProps.computed,e),y({vm:this,routeProp:e})}},watch:{$route:{immediate:!0,handler(){if(void 0===this.$options.routeProps)return;e&&function({normalizedRouteProps:t,context:e}){let o=!0;for(const r in t)o=o&&d({normalizedRouteProps:t,prop:r,context:e})&&f({normalizedRouteProps:t,prop:r,context:e})&&P({normalizedRouteProps:t,prop:r,context:e})}({normalizedRouteProps:this._routeProps.normalized,context:this});const t=function({normalizedRouteProps:t,route:e,context:o}){const r={};for(const o in t)r[o]=u(e.query,o)?JSON.parse(e.query[o]):t[o].default();return r}({normalizedRouteProps:this._routeProps.normalized,route:this.$route,context:this});for(const e in t)this._routeProps.computed[e]=t[e];var o,r;n.inspect&&(o=JSON.stringify(this._routeProps.computed,null,2),r=this,console.log("[VueRouteProps log]: ",o,r))}}}}}function p({routeProps:t,prop:e,context:u}){return"[object Object]"!==r(t[e].default)&&"[object Array]"!==r(t[e].default)||(o(`Invalid default value for routeProp "${e}": routeProps with type Object/Array must use a factory function to return the default value.`,u),!1)}function a({routeProps:t,prop:e,context:n}){let i=!0;return"[object Function]"===r(t[e].validator)&&u(t[e],"default")&&(i="[object Function]"===r(t[e].default)?t[e].validator(t[e].default()):t[e].validator(t[e].default)),!1===i&&o(`Invalid routeProp: custom validator check failed for routeProp "${e}".`,n),i}function l({routeProps:t}){if("[object Array]"===r(t)){const e={};for(const o of t)e[o]={};t=e}for(const e in t)"[object Array]"===r(t[e])?t[e]={type:t[e]}:"[object Object]"!==r(t[e])&&(t[e]={type:[t[e]]});for(const e in t){if(!1===u(t[e],"required")&&(t[e].required=!1),!1===u(t[e],"type")?t[e].type=n:"[object Array]"!==r(t[e].type)?t[e].type=[t[e].type]:0===t[e].type.length&&(t[e].type=n),!1===u(t[e],"default"))t[e].default=i;else if("[object Function]"!==r(t[e].default)){const o=t[e].default;t[e].default=function(){return o}}!1===u(t[e],"validator")&&(t[e].validator=s)}return t}function d({normalizedRouteProps:t,prop:e,context:r}){const n=u(r.$route.query,e)?JSON.parse(r.$route.query[e]):void 0;return!t[e].required||void 0!==n||(o(`Missing required routeProp: "${e}"`,r),!1)}function f({normalizedRouteProps:t,prop:e,context:n}){const i=u(n.$route.query,e)?JSON.parse(n.$route.query[e]):t[e].default();let s=!0;if(void 0===i?!0===t[e].required&&(s=!1):null===i?!1===t[e].type.includes(null)&&(s=!1):!1===t[e].type.includes(Object.getPrototypeOf(i).constructor)&&(s=!1),!1===s){const u=[];for(const o of t[e].type)null===o?u.push("null"):u.push(/function ([^(]+)/.exec(o.toString())[1]);const s=r(i).slice(8,-1);o(`Invalid routeProp: type check failed for routeProp "${e}". Expected ${u.join(", ")}, got ${s} with value ${JSON.stringify(i)}.`,n)}return s}function P({normalizedRouteProps:t,prop:e,context:r}){const n=u(r.$route.query,e)?JSON.parse(r.$route.query[e]):t[e].default();return!((t[e].required||u(r.$route.query,e))&&!t[e].validator(n,e))||(o(`Invalid routeProp: custom validator check failed for routeProp "${e}".`,r),!1)}function y({vm:t,routeProp:e}){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,set(){o("Avoid mutating a routeProp directly since the value will be overwritten whenever the route changes. Instead, use a data or computed property based on the routeProp's "+`value. Prop being mutated: "${e}"`,t)},get:()=>t._routeProps.computed[e]})}return{install:function(t,e){t.mixin(c(t,e))}}}));
