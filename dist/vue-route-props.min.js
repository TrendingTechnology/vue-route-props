!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).VueChronos=e()}(this,(function(){"use strict";const t="object"==typeof process&&"object"==typeof process.env&&"production"!==process.env.NODE_ENV,e=(t,e)=>{console.error("[VueRouteProps warn]: ",t,e)},o=t=>({}.toString.call(t)),r=(t,e)=>t.hasOwnProperty(e),n=[null,Boolean,String,Number,Array,Object];function u(){}function i(){return!0}function s(){return{data(){return r(this.$options,"routeProps")&&(t&&function({routeProps:t,context:e}){let r=!0;if("[object Object]"===o(t))for(const n in t)"[object Object]"===o(t[n])&&(r=r&&p({routeProps:t,prop:n,context:e}))}({routeProps:this.$options.routeProps,context:this}),this.$options.routeProps=function({routeProps:t}){if("[object Array]"===o(t)){const e={};for(const o of t)e[o]={};t=e}for(const e in t)"[object Array]"===o(t[e])?t[e]={type:t[e]}:"[object Object]"!==o(t[e])&&(t[e]={type:[t[e]]});for(const e in t){if(!1===r(t[e],"required")&&(t[e].required=!1),!1===r(t[e],"type")?t[e].type=n:"[object Array]"!==o(t[e].type)?t[e].type=[t[e].type]:0===t[e].type.length&&(t[e].type=n),!1===r(t[e],"default"))t[e].default=u;else if("[object Function]"!==o(t[e].default)){const o=t[e].default;t[e].default=function(){return o}}!1===r(t[e],"validator")&&(t[e].validator=i)}return t}({routeProps:this.$options.routeProps}),this._routeProps={}),{}},watch:{$route:{immediate:!0,handler(){if(!1===r(this.$options,"routeProps"))return;t&&function({normalizedRouteProps:t,context:e}){let o=!0;for(const r in t)o=o&&c({normalizedRouteProps:t,prop:r,context:e})&&a({normalizedRouteProps:t,prop:r,context:e})&&l({normalizedRouteProps:t,prop:r,context:e})}({normalizedRouteProps:this.$options.routeProps,context:this});const o=function({normalizedRouteProps:t,route:e,context:o}){const n={};for(const o in t)n[o]=r(e.query,o)?JSON.parse(e.query[o]):t[o].default();return n}({normalizedRouteProps:this.$options.routeProps,route:this.$route,context:this});for(const t in o)this._routeProps[t]=o[t],Object.defineProperty(this,t,{configurable:!0,enumerable:!0,set(o){e("Avoid mutating a routeProp directly since the value will be overwritten whenever the route changes. Instead, use a data or computed property based on the routeProp's "+`value. Prop being mutated: "${t}"`,this)},get(){return this._routeProps[t]}})}}}}}function p({routeProps:t,prop:r,context:n}){return"[object Object]"!==o(t[r].default)&&"[object Array]"!==o(t[r].default)||(e(`Invalid default value for routeProp "${r}": routeProps with type Object/Array must use a factory function to return the default value.`,n),!1)}function c({normalizedRouteProps:t,prop:o,context:n}){const u=r(n.$route.query,o)?JSON.parse(n.$route.query[o]):void 0;return!t[o].required||void 0!==u||(e(`Missing required routeProp: "${o}"`,n),!1)}function a({normalizedRouteProps:t,prop:n,context:u}){const i=r(u.$route.query,n)?JSON.parse(u.$route.query[n]):t[n].default();let s=!0;if(void 0===i?!0===t[n].required&&(s=!1):null===i?!1===t[n].type.includes(null)&&(s=!1):!1===t[n].type.includes(Object.getPrototypeOf(i).constructor)&&(s=!1),!1===s){const r=[];for(const e of t[n].type)null===e?r.push("null"):r.push(/function ([^(]+)/.exec(e.toString())[1]);const s=o(i).slice(8,-1);e(`Invalid routeProp: type check failed for routeProp "${n}". Expected ${r.join(", ")}, got ${s} with value ${JSON.stringify(i)}.`,u)}return s}function l({normalizedRouteProps:t,prop:o,context:n}){const u=r(n.$route.query,o)?JSON.parse(n.$route.query[o]):t[o].default();return!!t[o].validator(u,o)||(e(`Invalid routeProp: custom validator check failed for routeProp "${o}".`,n),!1)}return{install:function(t){t.mixin(s())}}}));
