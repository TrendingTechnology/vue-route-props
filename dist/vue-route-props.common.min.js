"use strict";var t,o=(t=require("vue"))&&"object"==typeof t&&"default"in t?t.default:t;const e="object"==typeof process&&"object"==typeof process.env&&"production"!==process.env.NODE_ENV,r=(t,o)=>{console.error("[VueRouteProps warn]: ",t,o)},u=t=>({}.toString.call(t)),n=(t,o)=>t.hasOwnProperty(o),i=[null,Boolean,String,Number,Array,Object];function c(){}function p(){return!0}function s(){return{beforeCreate(){if(void 0!==this.$options.routeProps){e&&function({routeProps:t,context:o}){let e=!0;if("[object Object]"===u(t))for(const r in t)"[object Object]"===u(t[r])&&(e=e&&a({routeProps:t,prop:r,context:o})&&l({routeProps:t,prop:r,context:o}))}({routeProps:this.$options.routeProps,context:this}),this._routeProps={normalized:d({routeProps:this.$options.routeProps}),computed:{}};for(const t in this._routeProps.normalized)this._routeProps.computed[t]=void 0,o.util.defineReactive(this._routeProps.computed,t),v({vm:this,routeProp:t})}},watch:{$route:{immediate:!0,handler(){if(void 0===this.$options.routeProps)return;e&&function({normalizedRouteProps:t,context:o}){let e=!0;for(const r in t)e=e&&f({normalizedRouteProps:t,prop:r,context:o})&&P({normalizedRouteProps:t,prop:r,context:o})&&y({normalizedRouteProps:t,prop:r,context:o})}({normalizedRouteProps:this._routeProps.normalized,context:this});const t=function({normalizedRouteProps:t,route:o,context:e}){const r={};for(const e in t)r[e]=n(o.query,e)?JSON.parse(o.query[e]):t[e].default();return r}({normalizedRouteProps:this._routeProps.normalized,route:this.$route,context:this});for(const o in t)this._routeProps.computed[o]=t[o]}}}}}function a({routeProps:t,prop:o,context:e}){return"[object Object]"!==u(t[o].default)&&"[object Array]"!==u(t[o].default)||(r(`Invalid default value for routeProp "${o}": routeProps with type Object/Array must use a factory function to return the default value.`,e),!1)}function l({routeProps:t,prop:o,context:e}){let i=!0;return"[object Function]"===u(t[o].validator)&&n(t[o],"default")&&(i="[object Function]"===u(t[o].default)?t[o].validator(t[o].default()):t[o].validator(t[o].default)),!1===i&&r(`Invalid routeProp: custom validator check failed for routeProp "${o}".`,e),i}function d({routeProps:t}){if("[object Array]"===u(t)){const o={};for(const e of t)o[e]={};t=o}for(const o in t)"[object Array]"===u(t[o])?t[o]={type:t[o]}:"[object Object]"!==u(t[o])&&(t[o]={type:[t[o]]});for(const o in t){if(!1===n(t[o],"required")&&(t[o].required=!1),!1===n(t[o],"type")?t[o].type=i:"[object Array]"!==u(t[o].type)?t[o].type=[t[o].type]:0===t[o].type.length&&(t[o].type=i),!1===n(t[o],"default"))t[o].default=c;else if("[object Function]"!==u(t[o].default)){const e=t[o].default;t[o].default=function(){return e}}!1===n(t[o],"validator")&&(t[o].validator=p)}return t}function f({normalizedRouteProps:t,prop:o,context:e}){const u=n(e.$route.query,o)?JSON.parse(e.$route.query[o]):void 0;return!t[o].required||void 0!==u||(r(`Missing required routeProp: "${o}"`,e),!1)}function P({normalizedRouteProps:t,prop:o,context:e}){const i=n(e.$route.query,o)?JSON.parse(e.$route.query[o]):t[o].default();let c=!0;if(void 0===i?!0===t[o].required&&(c=!1):null===i?!1===t[o].type.includes(null)&&(c=!1):!1===t[o].type.includes(Object.getPrototypeOf(i).constructor)&&(c=!1),!1===c){const n=[];for(const e of t[o].type)null===e?n.push("null"):n.push(/function ([^(]+)/.exec(e.toString())[1]);const c=u(i).slice(8,-1);r(`Invalid routeProp: type check failed for routeProp "${o}". Expected ${n.join(", ")}, got ${c} with value ${JSON.stringify(i)}.`,e)}return c}function y({normalizedRouteProps:t,prop:o,context:e}){const u=n(e.$route.query,o)?JSON.parse(e.$route.query[o]):t[o].default();return!((t[o].required||n(e.$route.query,o))&&!t[o].validator(u,o))||(r(`Invalid routeProp: custom validator check failed for routeProp "${o}".`,e),!1)}function v({vm:t,routeProp:o}){Object.defineProperty(t,o,{configurable:!0,enumerable:!0,set(){r("Avoid mutating a routeProp directly since the value will be overwritten whenever the route changes. Instead, use a data or computed property based on the routeProp's "+`value. Prop being mutated: "${o}"`,t)},get:()=>t._routeProps.computed[o]})}var h={install:function(t){t.mixin(s())}};module.exports=h;
