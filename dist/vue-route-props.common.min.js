"use strict";const t="object"==typeof process&&"object"==typeof process.env&&"production"!==process.env.NODE_ENV,o=(t,o)=>{console.error("[VueRouteProps warn]: ",t,o)},e=t=>({}.toString.call(t)),r=(t,o)=>t.hasOwnProperty(o),n=[null,Boolean,String,Number,Array,Object];function u(){}function i(){return!0}function s(n,u){return{beforeCreate(){if(void 0!==this.$options.routeProps){(u=function({options:e={inspect:!1,debug:!1},context:r}){"[object Object]"!=={}.toString.call(e)&&o(`Options: ${e} should be an object`,r);void 0===e.inspect&&(e.inspect=!1);void 0===e.debug&&(e.debug=t);return e}({options:u,context:this})).debug&&(function({context:t}){void 0===t.$router&&o("Missing vue-router",t)}({context:this}),function({routeProps:t,context:o}){let r=!0;if("[object Object]"===e(t))for(const n in t)"[object Object]"===e(t[n])&&(r=r&&c({routeProps:t,prop:n,context:o})&&p({routeProps:t,prop:n,context:o}))}({routeProps:this.$options.routeProps,context:this})),this._routeProps={normalized:a({routeProps:this.$options.routeProps}),computed:{}};for(const t in this._routeProps.normalized)this._routeProps.computed[t]=void 0,n.util.defineReactive(this._routeProps.computed,t),P({vm:this,routeProp:t})}},watch:{$route:{immediate:!0,handler(){if(void 0===this.$options.routeProps)return;u.debug&&function({normalizedRouteProps:t,context:o}){let e=!0;for(const r in t)e=e&&l({normalizedRouteProps:t,prop:r,context:o})&&d({normalizedRouteProps:t,prop:r,context:o})&&f({normalizedRouteProps:t,prop:r,context:o})}({normalizedRouteProps:this._routeProps.normalized,context:this});const t=function({normalizedRouteProps:t,route:o,context:e}){const n={};for(const e in t)n[e]=r(o.query,e)?JSON.parse(o.query[e]):t[e].default();return n}({normalizedRouteProps:this._routeProps.normalized,route:this.$route,context:this});for(const o in t)this._routeProps.computed[o]=t[o];var o,e;u.inspect&&(o=JSON.stringify(this._routeProps.computed,null,2),e=this,console.log("[VueRouteProps log]: ",o,e))}}}}}function c({routeProps:t,prop:r,context:n}){return"[object Object]"!==e(t[r].default)&&"[object Array]"!==e(t[r].default)||(o(`Invalid default value for routeProp "${r}": routeProps with type Object/Array must use a factory function to return the default value.`,n),!1)}function p({routeProps:t,prop:n,context:u}){let i=!0;return"[object Function]"===e(t[n].validator)&&r(t[n],"default")&&(i="[object Function]"===e(t[n].default)?t[n].validator(t[n].default()):t[n].validator(t[n].default)),!1===i&&o(`Invalid routeProp: custom validator check failed for routeProp "${n}".`,u),i}function a({routeProps:t}){if("[object Array]"===e(t)){const o={};for(const e of t)o[e]={};t=o}for(const o in t)"[object Array]"===e(t[o])?t[o]={type:t[o]}:"[object Object]"!==e(t[o])&&(t[o]={type:[t[o]]});for(const o in t){if(!1===r(t[o],"required")&&(t[o].required=!1),!1===r(t[o],"type")?t[o].type=n:"[object Array]"!==e(t[o].type)?t[o].type=[t[o].type]:0===t[o].type.length&&(t[o].type=n),!1===r(t[o],"default"))t[o].default=u;else if("[object Function]"!==e(t[o].default)){const e=t[o].default;t[o].default=function(){return e}}!1===r(t[o],"validator")&&(t[o].validator=i)}return t}function l({normalizedRouteProps:t,prop:e,context:n}){const u=r(n.$route.query,e)?JSON.parse(n.$route.query[e]):void 0;return!t[e].required||void 0!==u||(o(`Missing required routeProp: "${e}"`,n),!1)}function d({normalizedRouteProps:t,prop:n,context:u}){const i=r(u.$route.query,n)?JSON.parse(u.$route.query[n]):t[n].default();let s=!0;if(void 0===i?!0===t[n].required&&(s=!1):null===i?!1===t[n].type.includes(null)&&(s=!1):!1===t[n].type.includes(Object.getPrototypeOf(i).constructor)&&(s=!1),!1===s){const r=[];for(const o of t[n].type)null===o?r.push("null"):r.push(/function ([^(]+)/.exec(o.toString())[1]);const s=e(i).slice(8,-1);o(`Invalid routeProp: type check failed for routeProp "${n}". Expected ${r.join(", ")}, got ${s} with value ${JSON.stringify(i)}.`,u)}return s}function f({normalizedRouteProps:t,prop:e,context:n}){const u=r(n.$route.query,e)?JSON.parse(n.$route.query[e]):t[e].default();return!((t[e].required||r(n.$route.query,e))&&!t[e].validator(u,e))||(o(`Invalid routeProp: custom validator check failed for routeProp "${e}".`,n),!1)}function P({vm:t,routeProp:e}){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,set(){o("Avoid mutating a routeProp directly since the value will be overwritten whenever the route changes. Instead, use a data or computed property based on the routeProp's "+`value. Prop being mutated: "${e}"`,t)},get:()=>t._routeProps.computed[e]})}var v={install:function(t,o={debug:"development"===process.env.NODE_ENV||"test"===process.env.NODE_ENV,inspect:!1}){t.mixin(s(t,o))}};module.exports=v;
